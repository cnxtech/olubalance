<div class="row">

    <%= simple_form_for(@account) do |f| %>

      <% if @account.errors.any? %>
        <div id="error explanation">
          <h4>
            <%= "#{pluralize(@account.errors.count, "error")} prohibited this account from being saved:" %>
          </h4>
          <ul>
            <% @account.errors.full_messages.each do |msg| %>
              <li>
                <%= msg %>
              </li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="row">
        <div class="input-field col s12 xl4 l6">
          <i class="material-icons prefix ob-text-primary">account_balance</i>
          <%= f.label :name, class: 'active' %>
          <%= f.text_field :name, placeholder: "Enter an account name" %>
        </div>
      </div>

      <div class="row">
        <div class="input-field col s12 xl4 l6">
          <i class="material-icons prefix ob-text-primary">looks_4</i>
          <%= f.label :last_four, class: 'active', label: "Last Four Digits of Account Number (optional)" %>
          <%= f.text_field :last_four, placeholder: "Last Four Digits of Account Number" %>
        </div>
      </div>

      <div class="row">
        <div class="input-field col s12 xl4 l6">
          <i class="material-icons prefix ob-text-primary">attach_money</i>
          <%= f.label :starting_balance, class: 'active' %>
          <%= f.number_field :starting_balance, value: number_with_precision(f.object.starting_balance, precision: 2), step: 0.01, placeholder: "Enter the starting balance", readonly: (@account.new_record? ? false : true) %>
        </div>
      </div>

      <div class="row center-align">
        <div class="col s12 xl4 l6">
          <%= link_to 'Cancel', accounts_path, class: 'btn waves-effect waves-light' %>
          <%= button_tag(type: 'submit', class: 'btn waves-effect waves-light') do %>
            <% if @account.new_record? then %>
              Create
            <% else %>
              Update
            <% end %><i class="material-icons right">send</i>
          <% end %>
          <% if !@account.new_record? then %><br /><br />
            <a href="#deactivate-account" class="modal-trigger btn waves-effect waves-light tooltipped" data-position="bottom" data-tooltip="Marks account as inactive. Click for more details">Deactivate<i class="material-icons right">cancel</i></a>
          <% end %>
        </div>
      </div>

              <div id="deactivate-account" class="modal">
                <div class="modal-content ob-text-primary">
                  <h4>Deactivate <%= account.name %>?</h4>
                  <p>Deactivating an account hides it from your account list, while keeping all transaction history for record keeping purposes. Inactive accounts can be found from the user menu and reactivated at any time.  This is a non-destructive way of archiving an account.</p>
                </div>
                <div class="modal-footer">
                  <a href="#!" class="modal-action modal-close waves-effect waves-light btn-flat ob-text-primary">Cancel</a>
                  <%= link_to "Deactivate", deactivate_account_path(@account), class: "modal-action modal-close waves-effect waves-light btn-flat ob-text-primary", :'data-position' => "top", :'data-tooltip' => "Deactivate Account" %>
                </div>
              </div>

    <% end %>
</div>
